/*! timeously v0.2.2 (Sat, 7 Apr 2018 02:09:33) */
!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("moment-timezone")):"function"==typeof define&&define.amd?define("Timeously",["moment-timezone"],b):"object"==typeof exports?exports.Timeously=b(require("moment-timezone")):a.Timeously=b(a["moment-timezone"])}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("day"===a)return b.daysInMonth;var c=r[a];if(!c)throw new Error("Can not currently handle "+a+" intervals");return c}function f(a,b,c){return!b||!c||(b<c?a>=b&&a<=c:a>=b||a<=c)}Object.defineProperty(b,"__esModule",{value:!0});var g=c(1),h=d(g),i=c(2),j=d(i),k=c(22),l=d(k),m=c(23),n=d(m),o=c(26),p=d(o),q=["year","month","day","hour","minute","second","millisecond"],r={millisecond:1e3,second:60,minute:60,hour:24,month:12},s=function(){function a(b,c){(0,h["default"])(this,a);var d=b.name,e=b.interval,f=b.type,g=b.tz,i=b.start,j=b.stop;this.name=d?" "+d:"",this.interval=e||1,this.intervalType=f||l["default"].MINUTELY,this.tz=g,this.callback=c,this.startTime=i,this.stopTime=j,this.started=!1,this.timerID=null,this.start()}return(0,j["default"])(a,[{key:"execute",value:function(){var a=this;if(a.timerID){a.callback();var b=a.calculateNextTimeout();this.setLongTimeout(b)}}},{key:"start",value:function(){var a=this,b=a.title,c=a.name,d=a.calculateNextTimeout(),e=new p["default"](d);this.setLongTimeout(d),console.log("Timeously starting "+b+c+" in T - "+e.toString()+" and counting")}},{key:"stop",value:function(){var a=this.title,b=this.name,c=this.now;console.log("["+a+"]"+b+": Called stop at "+c.toString()),this.started=!1,null!==this.timerID&&(clearTimeout(this.timerID),this.timerID=null)}},{key:"calculateNextTimeout",value:function(){for(var a=this.name,b=this.title,c=this.interval,d=this.intervalType,g=this.started,h=this.now,i=this.startTime,j=this.stopTime,k=e(d,h),l=h,m=6;m>=0;m--){var n=q[m];if(n===d)break;switch(n){case"day":l[n]=1;break;case"month":l[n]=0;break;default:l[n]-=l[n]}}l[d]++;var o=l[d];if(i)g?(l[d]+=c-1,j&&(o=l[d],f(o,i,j)||(l[d]+=o>i?k-o+i:i-o))):(this.started=!0,l[d]+=o>i?k-o+i:i-o);else if(g)l[d]+=c-1;else for(this.started=!0;c>1&&l[d]%c!==0;)l[d]++;var p=l-this.now;return console.log("["+this.now.toString()+"] ("+b+")"+a+" - Next event is at "+l.toString()+". "+p+"ms"),p}},{key:"setLongTimeout",value:function(a){var b=this,c=b.title,d=b.name,e=864e5;a>e?b.timerID=setTimeout(function(){var f=a-e,g=Math.floor(f/864e5);console.log(""+c+d+": Long timer - "+g+" days remaining"),b.setLongTimeout(f)},e):b.timerID=setTimeout(function(){b.execute()},a)}},{key:"title",get:function(){var a=this.interval,b=this.intervalType;for(var c in l["default"]){var d=l["default"][c];if(d===b)return a+" "+c.toLowerCase()}}},{key:"now",get:function(){return(new n["default"]).tz(this.tz)}}],[{key:"IntervalTypes",get:function(){return l["default"]}},{key:"TimeBucket",get:function(){return n["default"]}},{key:"TimeSpan",get:function(){return p["default"]}}]),a}();b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var e=c(3),f=d(e);b["default"]=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),(0,f["default"])(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()},function(a,b,c){a.exports={"default":c(4),__esModule:!0}},function(a,b,c){c(5);var d=c(8).Object;a.exports=function(a,b,c){return d.defineProperty(a,b,c)}},function(a,b,c){var d=c(6);d(d.S+d.F*!c(16),"Object",{defineProperty:c(12).f})},function(a,b,c){var d=c(7),e=c(8),f=c(9),g=c(11),h=c(21),i="prototype",j=function(a,b,c){var k,l,m,n=a&j.F,o=a&j.G,p=a&j.S,q=a&j.P,r=a&j.B,s=a&j.W,t=o?e:e[b]||(e[b]={}),u=t[i],v=o?d:p?d[b]:(d[b]||{})[i];o&&(c=b);for(k in c)l=!n&&v&&void 0!==v[k],l&&h(t,k)||(m=l?v[k]:c[k],t[k]=o&&"function"!=typeof v[k]?c[k]:r&&l?f(m,d):s&&v[k]==m?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b[i]=a[i],b}(m):q&&"function"==typeof m?f(Function.call,m):m,q&&((t.virtual||(t.virtual={}))[k]=m,a&j.R&&u&&!u[k]&&g(u,k,m)))};j.F=1,j.G=2,j.S=4,j.P=8,j.B=16,j.W=32,j.U=64,j.R=128,a.exports=j},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b){var c=a.exports={version:"2.5.4"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(10);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b,c){var d=c(12),e=c(20);a.exports=c(16)?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},function(a,b,c){var d=c(13),e=c(15),f=c(19),g=Object.defineProperty;b.f=c(16)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(h){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},function(a,b,c){var d=c(14);a.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},function(a,b){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(a,b,c){a.exports=!c(16)&&!c(17)(function(){return 7!=Object.defineProperty(c(18)("div"),"a",{get:function(){return 7}}).a})},function(a,b,c){a.exports=!c(17)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(a,b){a.exports=function(a){try{return!!a()}catch(b){return!0}}},function(a,b,c){var d=c(14),e=c(7).document,f=d(e)&&d(e.createElement);a.exports=function(a){return f?e.createElement(a):{}}},function(a,b,c){var d=c(14);a.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},function(a,b){a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},function(a,b){var c={}.hasOwnProperty;a.exports=function(a,b){return c.call(a,b)}},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b["default"]={SECONDLY:"second",MINUTELY:"minute",HOURLY:"hour",DAILY:"day",WEEKLY:"dayOfWeek",MONTHLY:"month",YEARLY:"year"},a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(1),f=d(e),g=c(2),h=d(g),i=c(24),j=d(i),k=c(25),l=-(new Date).getTimezoneOffset(),m=function(){function a(b){(0,f["default"])(this,a),b=b?"string"==typeof b?new Date(b):b:new Date,this.date=b,this._tzOffsetMinutes=-b.getTimezoneOffset()}return(0,h["default"])(a,[{key:"tz",value:function(a){return a||(a="GMT"),this.tzOffsetMinutes=k.tz(a).utcOffset(),this.minute+=this.tzOffsetMinutes-l,this}},{key:"subtract",value:function(a){return this-a}},{key:"toString",value:function(a){return a?a.replace("yyyy",this.year.toString()).replace("yy",this.year.toString().substr(2)).replace("MM",(0,j["default"])(this.month+1)).replace("dd",(0,j["default"])(this.day)).replace("HH",(0,j["default"])(this.hour)).replace("mm",(0,j["default"])(this.minute)).replace("ss",(0,j["default"])(this.second)).replace("SSS",(0,j["default"])(this.millisecond,3)).replace("Z",this.offsetString):this.toISOString(!0)}},{key:"valueOf",value:function(){return this.date.getTime()}},{key:"toUTCDate",value:function(){var a=new Date(this.date);return a.setMinutes(a.getMinutes()-this.tzOffsetMinutes+l),a}},{key:"toISOString",value:function(a){return a?this.year+"-"+(0,j["default"])(this.month+1)+"-"+(0,j["default"])(this.day)+"T"+(0,j["default"])(this.hour)+":"+(0,j["default"])(this.minute)+":"+(0,j["default"])(this.second)+"."+(0,j["default"])(this.millisecond,3)+this.offsetString:this.toUTCDate().toISOString()}},{key:"offsetString",get:function(){var a=this.tzOffsetMinutes;if(0===a)return"Z";var b=a>=0?"+":"-";return""+b+(0,j["default"])(Math.floor(Math.abs(a/60)))+":"+(0,j["default"])(Math.abs(a%60))}},{key:"millisecond",get:function(){return this.date.getMilliseconds()},set:function(a){this.date.setMilliseconds(a)}},{key:"second",get:function(){return this.date.getSeconds()},set:function(a){this.date.setSeconds(a)}},{key:"minute",get:function(){return this.date.getMinutes()},set:function(a){this.date.setMinutes(a)}},{key:"hour",get:function(){return this.date.getHours()},set:function(a){this.date.setHours(a)}},{key:"day",get:function(){return this.date.getDate()},set:function(a){this.date.setDate(a)}},{key:"dayOfWeek",get:function(){return this.date.getDay()},set:function(a){this.date.setDay(a)}},{key:"dayName",get:function(){return a.DayNames[this.dayOfWeek]}},{key:"month",get:function(){return this.date.getMonth()},set:function(a){this.date.setMonth(a)}},{key:"monthName",get:function(){return a.MonthNames[this.month]}},{key:"year",get:function(){return this.date.getFullYear()},set:function(a){this.date.setFullYear(a)}},{key:"tzOffsetMinutes",get:function(){return this._tzOffsetMinutes},set:function(a){this._tzOffsetMinutes=a}},{key:"daysInMonth",get:function(){return new Date(this.year,this.month+1,0).getDate()}}],[{key:"MonthNames",get:function(){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},{key:"DayNames",get:function(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}]),a}();b["default"]=m,a.exports=b["default"]},function(a,b){"use strict";function c(a,b){if("string"!=typeof a&&(a=""+a),b||(b=2),a.length===b)return a;var c="000000000"+a;return c.substr(c.length-b)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c,a.exports=b["default"]},function(b,c){b.exports=a},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(1),f=d(e),g=c(2),h=d(g),i=c(24),j=d(i),k=function(){function a(b){(0,f["default"])(this,a),this.millisec=b||0;var c=~~(b/1e3);this.days=~~(c/86400),this.hours=~~((c-86400*this.days)/3600),this.mins=~~((c-86400*this.days-3600*this.hours)/60),this.sec=~~(c-86400*this.days-3600*this.hours-60*this.mins)}return(0,h["default"])(a,[{key:"toString",value:function(){var a="";return this.days>0&&(a+=(0,j["default"])(this.days)+":"),a+=(0,j["default"])(this.hours)+":"+(0,j["default"])(this.mins)+":"+(0,j["default"])(this.sec)}},{key:"totalDays",get:function(){return this.days}},{key:"totalHours",get:function(){return~~(this.totalSec/3600)}},{key:"totalMins",get:function(){return~~(this.totalSec/60)}},{key:"totalSec",get:function(){return Math.ceil(this.millisec/1e3)}}]),a}();b["default"]=k,a.exports=b["default"]}])});
//# sourceMappingURL=timeously.min.js.map