/*! timeously v0.2.2 (Mon, 16 Apr 2018 04:27:20)

Timeous interval creation for precise milestone events
@module timeously
@author Ashley Brener <ashley@frisb.com>
@license MIT

The MIT License (MIT)

Copyright (c) 2016 frisB.com <play@frisb.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
    */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("moment-timezone")):"function"==typeof define&&define.amd?define("Timeously",["moment-timezone"],e):"object"==typeof exports?exports.Timeously=e(require("moment-timezone")):t.Timeously=e(t["moment-timezone"])}(window,function(t){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);let i={SECONDLY:"second",MINUTELY:"minute",HOURLY:"hour",DAILY:"day",WEEKLY:"dayOfWeek",MONTHLY:"month",YEARLY:"year"};function n(t,e){if("string"!=typeof t&&(t=""+t),e||(e=2),t.length===e)return t;let s=`000000000${t}`;return s.substr(s.length-e)}let r=s(1),o=-(new Date).getTimezoneOffset();class a{constructor(t){t?"string"==typeof t&&(t=new Date(t)):t=new Date,this.date=t,this._tzOffsetMinutes=-t.getTimezoneOffset()}static get MonthNames(){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}static get DayNames(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}get offsetString(){let t=this.tzOffsetMinutes;if(0===t)return"Z";return`${t>=0?"+":"-"}${n(Math.floor(Math.abs(t/60)))}:${n(Math.abs(t%60))}`}tz(t){return t||(t="GMT"),this.tzOffsetMinutes=r.tz(t).utcOffset(),this.minute+=this.tzOffsetMinutes-o,this}subtract(t){return this-t}toString(t){return t?t.replace("yyyy",this.year.toString()).replace("yy",this.year.toString().substr(2)).replace("MM",n(this.month+1)).replace("dd",n(this.day)).replace("HH",n(this.hour)).replace("mm",n(this.minute)).replace("ss",n(this.second)).replace("SSS",n(this.millisecond,3)).replace("Z",this.offsetString):this.toISOString(!0)}valueOf(){return this.date.getTime()}toUTCDate(){let t=new Date(this.date);return t.setMinutes(t.getMinutes()-this.tzOffsetMinutes+o),t}toISOString(t){return t?this.year+"-"+n(this.month+1)+"-"+n(this.day)+"T"+n(this.hour)+":"+n(this.minute)+":"+n(this.second)+"."+n(this.millisecond,3)+this.offsetString:this.toUTCDate().toISOString()}get millisecond(){return this.date.getMilliseconds()}set millisecond(t){this.date.setMilliseconds(t)}get second(){return this.date.getSeconds()}set second(t){this.date.setSeconds(t)}get minute(){return this.date.getMinutes()}set minute(t){this.date.setMinutes(t)}get hour(){return this.date.getHours()}set hour(t){this.date.setHours(t)}get day(){return this.date.getDate()}set day(t){this.date.setDate(t)}get dayOfWeek(){return this.date.getDay()}set dayOfWeek(t){this.date.setDay(t)}get dayName(){return a.DayNames[this.dayOfWeek]}get month(){return this.date.getMonth()}set month(t){this.date.setMonth(t)}get monthName(){return a.MonthNames[this.month]}get year(){return this.date.getFullYear()}set year(t){this.date.setFullYear(t)}get tzOffsetMinutes(){return this._tzOffsetMinutes}set tzOffsetMinutes(t){this._tzOffsetMinutes=t}get daysInMonth(){return new Date(this.year,this.month+1,0).getDate()}}class u{constructor(t){this.millisec=t||0;let e=t/1e3;this.days=~~(e/86400),this.hours=~~((e-86400*this.days)/3600),this.mins=~~((e-86400*this.days-3600*this.hours)/60),this.sec=~~(e-86400*this.days-3600*this.hours-60*this.mins)}get totalDays(){return this.days}get totalHours(){return~~(this.totalSec/3600)}get totalMins(){return~~(this.totalSec/60)}get totalSec(){return Math.ceil(this.millisec/1e3)}toString(){let t="";return this.days>0&&(t+=`${n(this.days)}:`),t+=`${n(this.hours)}:${n(this.mins)}:${n(this.sec)}`}}let h=["year","month","day","hour","minute","second","millisecond"],l={millisecond:1e3,second:60,minute:60,hour:24,month:12};class c{constructor(t,e){let{name:s,interval:n,type:r,tz:o,start:a,stop:u}=t;this.name=s?` ${s}`:"",this.interval=n||1,this.intervalType=r||i.MINUTELY,this.tz=o,this.callback=e,this.startTime=a,this.stopTime=u,this.started=!1,this.timerID=null,this.start()}get title(){let{interval:t,intervalType:e}=this;for(let s in i){if(i[s]===e)return`${t} ${s.toLowerCase()}`}}get now(){return(new a).tz(this.tz)}execute(){if(!this.timerID)return;this.callback();let t=this.calculateNextTimeout();this.setLongTimeout(t)}start(){let{title:t,name:e}=this,s=this.calculateNextTimeout(),i=new u(s);this.setLongTimeout(s),console.log(`Timeously starting ${t}${e} in T - ${i.toString()} and counting`)}stop(){let{title:t,name:e,now:s}=this;console.log(`[${t}]${e}: Called stop at ${s.toString()}`),this.started=!1,null!==this.timerID&&(clearTimeout(this.timerID),this.timerID=null)}calculateNextTimeout(){let{name:t,title:e,interval:s,intervalType:i,started:n,now:r,startTime:o,stopTime:a}=this,u=function(t,e){if("day"===t)return e.daysInMonth;{let e=l[t];if(!e)throw new Error(`Can not currently handle ${t} intervals`);return e}}(i,r),c=r;for(let t=6;t>=0;t--){let e=h[t];if(e===i)break;switch(e){case"day":c[e]=1;break;case"month":c[e]=0;break;default:c[e]-=c[e]}}c[i]++;let m=c[i];if(o)n?(c[i]+=s-1,a&&(function(t,e,s){return!e||!s||(e<s?t>=e&&t<=s:t>=e||t<=s)}(m=c[i],o,a)||(c[i]+=m>o?u-m+o:o-m))):(this.started=!0,c[i]+=m>o?u-m+o:o-m);else if(n)c[i]+=s-1;else for(this.started=!0;s>1&&c[i]%s!=0;)c[i]++;let d=c-this.now;return console.log(`[${this.now.toString()}] (${e})${t} - Next event is at ${c.toString()}. ${d}ms`),d}setLongTimeout(t){let e=this,{title:s,name:i}=e;e.timerID=t>864e5?setTimeout(function(){let n=t-864e5,r=Math.floor(n/864e5);console.log(`${s}${i}: Long timer - ${r} days remaining`),e.setLongTimeout(n)},864e5):setTimeout(function(){e.execute()},t)}}s.d(e,"INTERVAL_TYPE",function(){return i}),s.d(e,"TimeBucket",function(){return a}),s.d(e,"TimeSpan",function(){return u}),s.d(e,"Timeously",function(){return c})},function(e,s){e.exports=t}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9UaW1lb3VzbHkvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL1RpbWVvdXNseS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9UaW1lb3VzbHkvLi9zcmMvaW50ZXJ2YWx0eXBlLmpzIiwid2VicGFjazovL1RpbWVvdXNseS8uL3NyYy9wYWQuanMiLCJ3ZWJwYWNrOi8vVGltZW91c2x5Ly4vc3JjL3RpbWVidWNrZXQuanMiLCJ3ZWJwYWNrOi8vVGltZW91c2x5Ly4vc3JjL3RpbWVzcGFuLmpzIiwid2VicGFjazovL1RpbWVvdXNseS8uL3NyYy90aW1lb3VzbHkuanMiLCJ3ZWJwYWNrOi8vVGltZW91c2x5L2V4dGVybmFsIFwibW9tZW50LXRpbWV6b25lXCIiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIklOVEVSVkFMX1RZUEUiLCJTRUNPTkRMWSIsIk1JTlVURUxZIiwiSE9VUkxZIiwiREFJTFkiLCJXRUVLTFkiLCJNT05USExZIiwiWUVBUkxZIiwicGFkIiwibnVtIiwic2l6ZSIsImxlbmd0aCIsInN1YnN0ciIsInRpbWVidWNrZXRfbW9tZW50IiwidGltZWJ1Y2tldF9sb2NhbE9mZnNldE1pbnV0ZXMiLCJEYXRlIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJ0aW1lYnVja2V0X1RpbWVCdWNrZXQiLCJbb2JqZWN0IE9iamVjdF0iLCJkYXRlIiwidGhpcyIsIl90ek9mZnNldE1pbnV0ZXMiLCJNb250aE5hbWVzIiwiRGF5TmFtZXMiLCJvZmZzZXRTdHJpbmciLCJ0em8iLCJ0ek9mZnNldE1pbnV0ZXMiLCJNYXRoIiwiZmxvb3IiLCJhYnMiLCJ0aW1lem9uZSIsInR6IiwidXRjT2Zmc2V0IiwibWludXRlIiwidGltZUJ1Y2tldCIsImZvcm1hdCIsInJlcGxhY2UiLCJ5ZWFyIiwidG9TdHJpbmciLCJtb250aCIsImRheSIsImhvdXIiLCJzZWNvbmQiLCJtaWxsaXNlY29uZCIsInRvSVNPU3RyaW5nIiwiZ2V0VGltZSIsInNldE1pbnV0ZXMiLCJnZXRNaW51dGVzIiwid2l0aFRpbWVab25lT2Zmc2V0IiwidG9VVENEYXRlIiwiZ2V0TWlsbGlzZWNvbmRzIiwidmFsIiwic2V0TWlsbGlzZWNvbmRzIiwiZ2V0U2Vjb25kcyIsInNldFNlY29uZHMiLCJnZXRIb3VycyIsInNldEhvdXJzIiwiZ2V0RGF0ZSIsInNldERhdGUiLCJkYXlPZldlZWsiLCJnZXREYXkiLCJzZXREYXkiLCJkYXlOYW1lIiwiZ2V0TW9udGgiLCJzZXRNb250aCIsIm1vbnRoTmFtZSIsImdldEZ1bGxZZWFyIiwic2V0RnVsbFllYXIiLCJkYXlzSW5Nb250aCIsInRpbWVzcGFuX1RpbWVTcGFuIiwibWlsbGlzZWMiLCJzZWMiLCJkYXlzIiwiaG91cnMiLCJtaW5zIiwidG90YWxEYXlzIiwidG90YWxIb3VycyIsInRvdGFsU2VjIiwidG90YWxNaW5zIiwiY2VpbCIsImNsb2NrIiwidGltZW91c2x5X2ludGVydmFscyIsInRpbWVvdXNseV9pbnRlcnZhbExpbWl0IiwidGltZW91c2x5X1RpbWVvdXNseSIsIm9wdGlvbnMiLCJjYWxsYmFjayIsImludGVydmFsIiwidHlwZSIsInN0YXJ0Iiwic3RvcCIsImludGVydmFsVHlwZSIsInN0YXJ0VGltZSIsInN0b3BUaW1lIiwic3RhcnRlZCIsInRpbWVySUQiLCJ0aXRsZSIsImtleSIsInRvTG93ZXJDYXNlIiwibm93IiwibmV4dFRpbWVvdXRNaWxsaXNlYyIsImNhbGN1bGF0ZU5leHRUaW1lb3V0Iiwic2V0TG9uZ1RpbWVvdXQiLCJ0aW1lc3BhbiIsImNvbnNvbGUiLCJsb2ciLCJjbGVhclRpbWVvdXQiLCJsaW1pdCIsIkVycm9yIiwidGltZW91c2x5X2dldExpbWl0IiwibmV4dEV2ZW50IiwiaW50ZXJ2IiwiY3VyclRpbWUiLCJ0aW1lb3VzbHlfdmFsaWRUaW1lIiwibWlsbGlzZWNzIiwidGltZW91dF9tcyIsInNlbGYiLCJzZXRUaW1lb3V0IiwicmVtYWluaW5nIiwiZXhlY3V0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxFQUFBRyxRQUFBLG9CQUNBLG1CQUFBQyxlQUFBQyxJQUNBRCxPQUFBLGdDQUFBSixHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLFVBQUFELEVBQUFHLFFBQUEsb0JBRUFKLEVBQUEsVUFBQUMsRUFBQUQsRUFBQSxvQkFSQSxDQVNDTyxPQUFBLFNBQUFDLEdBQ0QsbUJDVEEsSUFBQUMsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQVQsUUFHQSxJQUFBQyxFQUFBTSxFQUFBRSxJQUNBQyxFQUFBRCxFQUNBRSxHQUFBLEVBQ0FYLFlBVUEsT0FOQVksRUFBQUgsR0FBQUksS0FBQVosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQVEsR0FHQVAsRUFBQVUsR0FBQSxFQUdBVixFQUFBRCxRQTJDQSxPQXRDQVEsRUFBQU0sRUFBQUYsRUFHQUosRUFBQU8sRUFBQVIsRUFHQUMsRUFBQVEsRUFBQSxTQUFBaEIsRUFBQWlCLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFuQixFQUFBaUIsSUFDQUcs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QUUsR0FLQWdCLEVBQUFuQixJQUFBSixFQUFBLEVBRUFNLElBM0hBLFNBQUFtQixFQUFBcEIsRUFBQUMsR0FDQSxPQUFBRCxJQUFBQyxJQUdBRCxFQUFBQyxFQUNBbUIsR0FBQXBCLEdBQUFvQixHQUFBbkIsRUFFQW1CLEdBQUFwQixHQUFBb0IsR0FBQW5CLEdBdUhBb0IsQ0FGQUQsRUFBQUYsRUFBQW5CLEdBRUFDLEVBQUFDLEtBQ0FpQixFQUFBbkIsSUFBQXFCLEVBQUFwQixFQUFBZSxFQUFBSyxFQUFBcEIsSUFBQW9CLE1BVkEzRixLQUFBeUUsU0FBQSxFQUNBZ0IsRUFBQW5CLElBQUFxQixFQUFBcEIsRUFBQWUsRUFBQUssRUFBQXBCLElBQUFvQixRQWVBLEdBQUFsQixFQVFBZ0IsRUFBQW5CLElBQUFKLEVBQUEsT0FMQSxJQUZBbEUsS0FBQXlFLFNBQUEsRUFFQVAsRUFBQSxHQUFBdUIsRUFBQW5CLEdBQUFKLEdBQUEsR0FDQXVCLEVBQUFuQixLQVNBLElBQUF1QixFQUFBSixFQUFBekYsS0FBQThFLElBSUEsT0FGQUssUUFBQUMsUUFBb0JwRixLQUFBOEUsSUFBQTVELGdCQUF5QnlELEtBQVNqSCx3QkFBMkIrSCxFQUFBdkUsZUFBeUIyRSxPQUUxR0EsRUFHQS9GLGVBQUFnRyxHQUNBLElBQUFDLEVBQUEvRixNQUNBMkUsTUFBU0EsRUFBQWpILFFBQVlxSSxFQU1yQkEsRUFBQXJCLFFBSEFvQixFQUZBLE1BS0FFLFdBQUEsV0FDQSxJQUFBQyxFQUFBSCxFQU5BLE1BT0ExQyxFQUFBN0MsS0FBQUMsTUFBQXlGLEVBQUEsT0FDQWQsUUFBQUMsT0FBdUJULElBQVFqSCxtQkFBc0IwRixvQkFDckQyQyxFQUFBZCxlQUFBZ0IsSUFUQSxPQWNBRCxXQUFBLFdBQ0FELEVBQUFHLFdBQ09KLHVMQ3RNUHBKLEVBQUFELFFBQUFNIiwiZmlsZSI6InRpbWVvdXNseS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcIm1vbWVudC10aW1lem9uZVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIlRpbWVvdXNseVwiLCBbXCJtb21lbnQtdGltZXpvbmVcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiVGltZW91c2x5XCJdID0gZmFjdG9yeShyZXF1aXJlKFwibW9tZW50LXRpbWV6b25lXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJUaW1lb3VzbHlcIl0gPSBmYWN0b3J5KHJvb3RbXCJtb21lbnQtdGltZXpvbmVcIl0pO1xufSkod2luZG93LCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX18pIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGxldCBJTlRFUlZBTF9UWVBFID0ge1xuXHRTRUNPTkRMWTogJ3NlY29uZCcsXG5cdE1JTlVURUxZOiAnbWludXRlJyxcblx0SE9VUkxZOiAnaG91cicsXG5cdERBSUxZOiAnZGF5Jyxcblx0V0VFS0xZOiAnZGF5T2ZXZWVrJyxcblx0TU9OVEhMWTogJ21vbnRoJyxcblx0WUVBUkxZOiAneWVhcidcbn07IiwiZXhwb3J0IGZ1bmN0aW9uIHBhZChudW0sIHNpemUpIHtcblx0aWYgKHR5cGVvZihudW0pICE9PSAnc3RyaW5nJylcblx0XHRudW0gPSAnJyArIG51bTtcblxuXHRpZiAoIXNpemUpXG5cdFx0c2l6ZSA9IDI7XG5cblx0aWYgKG51bS5sZW5ndGggPT09IHNpemUpXG5cdFx0cmV0dXJuIG51bTtcblxuXHRsZXQgcyA9IGAwMDAwMDAwMDAke251bX1gO1xuXHRyZXR1cm4gcy5zdWJzdHIocy5sZW5ndGggLSBzaXplKTtcbn0iLCJpbXBvcnQgeyBwYWQgfSBmcm9tICcuL3BhZCc7XG5cbmxldCBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQtdGltZXpvbmUnKTtcblxubGV0IGxvY2FsT2Zmc2V0TWludXRlcyA9IC1uZXcgRGF0ZSgpLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbmV4cG9ydCBjbGFzcyBUaW1lQnVja2V0IHtcblx0Y29uc3RydWN0b3IoZGF0ZSkge1xuXHRcdGlmICghZGF0ZSkge1xuXHRcdFx0ZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHR5cGVvZihkYXRlKSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcblx0XHR9XG5cblx0XHR0aGlzLmRhdGUgPSBkYXRlO1xuXHRcdHRoaXMuX3R6T2Zmc2V0TWludXRlcyA9IC1kYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cdH1cblxuXHRzdGF0aWMgZ2V0IE1vbnRoTmFtZXMoKSB7XG5cdFx0cmV0dXJuIFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnXTtcblx0fVxuXG5cdHN0YXRpYyBnZXQgRGF5TmFtZXMoKSB7XG5cdFx0cmV0dXJuIFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J107XG5cdH1cblxuXHRnZXQgb2Zmc2V0U3RyaW5nKCkge1xuXHRcdGxldCB0em8gPSB0aGlzLnR6T2Zmc2V0TWludXRlcztcblxuXHRcdGlmICh0em8gPT09IDApIHtcblx0XHRcdHJldHVybiAnWic7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0bGV0IGRpZmYgPSB0em8gPj0gMCA/ICcrJyA6ICctJztcblx0XHRcdHJldHVybiBgJHtkaWZmfSR7cGFkKE1hdGguZmxvb3IoTWF0aC5hYnModHpvIC8gNjApKSl9OiR7cGFkKE1hdGguYWJzKHR6byAlIDYwKSl9YDtcblx0XHR9XG5cdH1cblxuXHR0eih0aW1lem9uZSkge1xuXHRcdGlmICghdGltZXpvbmUpXG5cdFx0XHR0aW1lem9uZSA9ICdHTVQnO1xuXG5cdFx0dGhpcy50ek9mZnNldE1pbnV0ZXMgPSBtb21lbnQudHoodGltZXpvbmUpLnV0Y09mZnNldCgpO1xuXHRcdHRoaXMubWludXRlICs9IHRoaXMudHpPZmZzZXRNaW51dGVzIC0gbG9jYWxPZmZzZXRNaW51dGVzO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIHJldHVybnMgdGhlIGRpZmZlcmVudCBpbiBtaWxsaXNlY29uZHMgYmV0d2VlbiB0aGlzIGFuZCB0aW1lQnVja2V0IGRhdGVcblx0ICogQHBhcmFtIHRpbWVCdWNrZXRcblx0ICogQHJldHVybnMge251bWJlcn1cbiAgICovXG5cdHN1YnRyYWN0KHRpbWVCdWNrZXQpIHtcblx0XHRyZXR1cm4gdGhpcyAtIHRpbWVCdWNrZXQ7XG5cdH1cblxuXHR0b1N0cmluZyhmb3JtYXQpIHtcblx0XHRpZiAoZm9ybWF0KSB7XG5cdFx0XHRyZXR1cm4gZm9ybWF0XG5cdFx0XHRcdC5yZXBsYWNlKCd5eXl5JywgdGhpcy55ZWFyLnRvU3RyaW5nKCkpXG5cdFx0XHRcdC5yZXBsYWNlKCd5eScsIHRoaXMueWVhci50b1N0cmluZygpLnN1YnN0cigyKSlcblx0XHRcdFx0LnJlcGxhY2UoJ01NJywgcGFkKHRoaXMubW9udGggKyAxKSlcblx0XHRcdFx0LnJlcGxhY2UoJ2RkJywgcGFkKHRoaXMuZGF5KSlcblx0XHRcdFx0LnJlcGxhY2UoJ0hIJywgcGFkKHRoaXMuaG91cikpXG5cdFx0XHRcdC5yZXBsYWNlKCdtbScsIHBhZCh0aGlzLm1pbnV0ZSkpXG5cdFx0XHRcdC5yZXBsYWNlKCdzcycsIHBhZCh0aGlzLnNlY29uZCkpXG5cdFx0XHRcdC5yZXBsYWNlKCdTU1MnLCBwYWQodGhpcy5taWxsaXNlY29uZCwgMykpXG5cdFx0XHRcdC5yZXBsYWNlKCdaJywgdGhpcy5vZmZzZXRTdHJpbmcpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiB0aGlzLnRvSVNPU3RyaW5nKHRydWUpO1xuXHRcdH1cblx0fVxuXG5cdHZhbHVlT2YoKSB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0ZS5nZXRUaW1lKCk7XG5cdH1cblxuXHR0b1VUQ0RhdGUoKSB7XG5cdFx0bGV0IGQgPSBuZXcgRGF0ZSh0aGlzLmRhdGUpO1xuXHRcdGQuc2V0TWludXRlcyhkLmdldE1pbnV0ZXMoKSAtIHRoaXMudHpPZmZzZXRNaW51dGVzICsgbG9jYWxPZmZzZXRNaW51dGVzKTtcblx0XHRyZXR1cm4gZDtcblx0fVxuXG5cdHRvSVNPU3RyaW5nKHdpdGhUaW1lWm9uZU9mZnNldCkge1xuXHRcdGlmICh3aXRoVGltZVpvbmVPZmZzZXQpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMueWVhclxuXHRcdFx0XHRcdCsgJy0nICsgcGFkKHRoaXMubW9udGggKyAxKVxuXHRcdFx0XHRcdCsgJy0nICsgcGFkKHRoaXMuZGF5KVxuXHRcdFx0XHRcdCsgJ1QnICsgcGFkKHRoaXMuaG91cilcblx0XHRcdFx0XHQrICc6JyArIHBhZCh0aGlzLm1pbnV0ZSlcblx0XHRcdFx0XHQrICc6JyArIHBhZCh0aGlzLnNlY29uZClcblx0XHRcdFx0XHQrICcuJyArIHBhZCh0aGlzLm1pbGxpc2Vjb25kLCAzKVxuXHRcdFx0XHRcdCsgdGhpcy5vZmZzZXRTdHJpbmc7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuIHRoaXMudG9VVENEYXRlKCkudG9JU09TdHJpbmcoKTtcblx0XHR9XG5cdH1cblxuXHRnZXQgbWlsbGlzZWNvbmQoKSB7IHJldHVybiB0aGlzLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7IH1cblx0c2V0IG1pbGxpc2Vjb25kKHZhbCkgeyB0aGlzLmRhdGUuc2V0TWlsbGlzZWNvbmRzKHZhbCk7IH1cblxuXHRnZXQgc2Vjb25kKCkgeyByZXR1cm4gdGhpcy5kYXRlLmdldFNlY29uZHMoKTsgfVxuXHRzZXQgc2Vjb25kKHZhbCkgeyB0aGlzLmRhdGUuc2V0U2Vjb25kcyh2YWwpOyB9XG5cblx0Z2V0IG1pbnV0ZSgpIHsgcmV0dXJuIHRoaXMuZGF0ZS5nZXRNaW51dGVzKCk7IH1cblx0c2V0IG1pbnV0ZSh2YWwpIHsgdGhpcy5kYXRlLnNldE1pbnV0ZXModmFsKTsgfVxuXG5cdGdldCBob3VyKCkgeyByZXR1cm4gdGhpcy5kYXRlLmdldEhvdXJzKCk7IH1cblx0c2V0IGhvdXIodmFsKSB7IHRoaXMuZGF0ZS5zZXRIb3Vycyh2YWwpOyB9XG5cblx0Z2V0IGRheSgpIHsgcmV0dXJuIHRoaXMuZGF0ZS5nZXREYXRlKCk7IH1cblx0c2V0IGRheSh2YWwpIHsgdGhpcy5kYXRlLnNldERhdGUodmFsKTsgfVxuXG5cdGdldCBkYXlPZldlZWsoKSB7IHJldHVybiB0aGlzLmRhdGUuZ2V0RGF5KCk7IH1cblx0c2V0IGRheU9mV2Vlayh2YWwpIHsgdGhpcy5kYXRlLnNldERheSh2YWwpOyB9XG5cblx0Z2V0IGRheU5hbWUoKSB7XG5cdFx0cmV0dXJuIFRpbWVCdWNrZXQuRGF5TmFtZXNbdGhpcy5kYXlPZldlZWtdO1xuXHR9XG5cblx0Z2V0IG1vbnRoKCkgeyByZXR1cm4gdGhpcy5kYXRlLmdldE1vbnRoKCk7IH1cblx0c2V0IG1vbnRoKHZhbCkgeyB0aGlzLmRhdGUuc2V0TW9udGgodmFsKTsgfVxuXG5cdGdldCBtb250aE5hbWUoKSB7IHJldHVybiBUaW1lQnVja2V0Lk1vbnRoTmFtZXNbdGhpcy5tb250aF07IH1cblxuXHRnZXQgeWVhcigpIHsgcmV0dXJuIHRoaXMuZGF0ZS5nZXRGdWxsWWVhcigpOyB9XG5cdHNldCB5ZWFyKHZhbCkgeyB0aGlzLmRhdGUuc2V0RnVsbFllYXIodmFsKTsgfVxuXG5cdGdldCB0ek9mZnNldE1pbnV0ZXMoKSB7IHJldHVybiB0aGlzLl90ek9mZnNldE1pbnV0ZXM7IH1cblx0c2V0IHR6T2Zmc2V0TWludXRlcyh2YWwpIHsgdGhpcy5fdHpPZmZzZXRNaW51dGVzID0gdmFsOyB9XG5cblx0Z2V0IGRheXNJbk1vbnRoKCkge1xuXHRcdHJldHVybiBuZXcgRGF0ZSh0aGlzLnllYXIsIHRoaXMubW9udGggKyAxLCAwKS5nZXREYXRlKCk7XG5cdH1cbn0iLCJpbXBvcnQgeyBwYWQgfSBmcm9tICcuL3BhZCc7XG5cbmV4cG9ydCBjbGFzcyBUaW1lU3BhbiB7XG5cbiAgY29uc3RydWN0b3IobWlsbGlzZWMpIHtcblxuICAgIHRoaXMubWlsbGlzZWMgPSBtaWxsaXNlYyB8fCAwO1xuXG4gICAgbGV0IHNlYyA9IG1pbGxpc2VjIC8gMTAwMDtcblxuICAgIHRoaXMuZGF5cyA9IH5+KHNlYyAvIDg2NDAwKTtcbiAgICAvLyBBZnRlciBkZWR1Y3RpbmcgdGhlIGRheXMgY2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgaG91cnMgbGVmdFxuICAgIHRoaXMuaG91cnMgPSB+figoc2VjIC0gKHRoaXMuZGF5cyAqIDg2NDAwKSkgLyAzNjAwKTtcbiAgICAvLyBBZnRlciBkYXlzIGFuZCBob3VycyAsIGhvdyBtYW55IG1pbnV0ZXMgYXJlIGxlZnRcbiAgICB0aGlzLm1pbnMgPSB+figoc2VjIC0gKHRoaXMuZGF5cyAqIDg2NDAwKSAtICh0aGlzLmhvdXJzICogMzYwMCkpIC8gNjApO1xuICAgIC8vIEZpbmFsbHkgaG93IG1hbnkgc2Vjb25kcyBsZWZ0IGFmdGVyIHJlbW92aW5nIGRheXMsIGhvdXJzIGFuZCBtaW51dGVzLlxuICAgIHRoaXMuc2VjID0gfn4oKHNlYyAtICh0aGlzLmRheXMgKiA4NjQwMCkgLSAodGhpcy5ob3VycyAqIDM2MDApIC0gKHRoaXMubWlucyAqIDYwKSkpOy8vICsgMTsgcmVtb3ZpbmcgdG8gdGVzdCBleHBvcnRzIGRlbHRhZ3J1bnRcbiAgfVxuXG4gIGdldCB0b3RhbERheXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF5cztcbiAgfVxuXG4gIGdldCB0b3RhbEhvdXJzKCkge1xuICAgIHJldHVybiB+fih0aGlzLnRvdGFsU2VjIC8gMzYwMCk7XG4gIH1cblxuICBnZXQgdG90YWxNaW5zKCkge1xuICAgIHJldHVybiB+fih0aGlzLnRvdGFsU2VjIC8gNjApO1xuICB9XG5cbiAgZ2V0IHRvdGFsU2VjKCkge1xuICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5taWxsaXNlYyAvIDEwMDApO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgbGV0IGNsb2NrID0gJyc7XG5cbiAgICBpZiAodGhpcy5kYXlzID4gMClcbiAgICAgIGNsb2NrICs9IGAke3BhZCh0aGlzLmRheXMpfTpgO1xuXG4gICAgY2xvY2sgKz0gYCR7cGFkKHRoaXMuaG91cnMpfToke3BhZCh0aGlzLm1pbnMpfToke3BhZCh0aGlzLnNlYyl9YDtcblxuICAgIHJldHVybiBjbG9jaztcbiAgfVxufVxuIiwiaW1wb3J0IHsgSU5URVJWQUxfVFlQRSB9IGZyb20gJy4vaW50ZXJ2YWx0eXBlJztcbmltcG9ydCB7IFRpbWVCdWNrZXQgfSBmcm9tICcuL3RpbWVidWNrZXQnO1xuaW1wb3J0IHsgVGltZVNwYW4gfSBmcm9tICcuL3RpbWVzcGFuJztcblxubGV0IGludGVydmFscyA9IFsneWVhcicsICdtb250aCcsICdkYXknLCAnaG91cicsICdtaW51dGUnLCAnc2Vjb25kJywgJ21pbGxpc2Vjb25kJ107XG5sZXQgaW50ZXJ2YWxMaW1pdCA9IHtcbiAgbWlsbGlzZWNvbmQ6IDEwMDAsXG4gIHNlY29uZDogNjAsXG4gIG1pbnV0ZTogNjAsXG4gIGhvdXI6IDI0LFxuICBtb250aDogMTJcbn07XG5cbmZ1bmN0aW9uIGdldExpbWl0KGludGVydmFsVHlwZSwgZGF0ZSkge1xuICBpZiAoaW50ZXJ2YWxUeXBlID09PSAnZGF5Jykge1xuICAgIHJldHVybiBkYXRlLmRheXNJbk1vbnRoO1xuICB9XG4gIGVsc2Uge1xuICAgIGxldCBsaW1pdCA9IGludGVydmFsTGltaXRbaW50ZXJ2YWxUeXBlXTtcbiAgICBpZiAoIWxpbWl0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbiBub3QgY3VycmVudGx5IGhhbmRsZSAke2ludGVydmFsVHlwZX0gaW50ZXJ2YWxzYCk7XG4gICAgfVxuICAgIHJldHVybiBsaW1pdDtcbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZFRpbWUoY3VyclRpbWUsIHN0YXJ0VGltZSwgc3RvcFRpbWUpIHtcbiAgaWYgKCFzdGFydFRpbWUgfHwgIXN0b3BUaW1lKVxuICAgIHJldHVybiB0cnVlO1xuXG4gIGlmIChzdGFydFRpbWUgPCBzdG9wVGltZSlcbiAgICByZXR1cm4gY3VyclRpbWUgPj0gc3RhcnRUaW1lICYmIGN1cnJUaW1lIDw9IHN0b3BUaW1lO1xuXG4gIHJldHVybiBjdXJyVGltZSA+PSBzdGFydFRpbWUgfHwgY3VyclRpbWUgPD0gc3RvcFRpbWU7XG59XG5cbmV4cG9ydCBjbGFzcyBUaW1lb3VzbHkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIGxldCB7bmFtZSwgaW50ZXJ2YWwsIHR5cGUsIHR6LCBzdGFydCwgc3RvcH0gPSBvcHRpb25zO1xuXG4gICAgdGhpcy5uYW1lID0gKG5hbWUgPyBgICR7bmFtZX1gIDogJycpO1xuICAgIHRoaXMuaW50ZXJ2YWwgPSBpbnRlcnZhbCB8fCAxO1xuICAgIHRoaXMuaW50ZXJ2YWxUeXBlID0gdHlwZSB8fCBJTlRFUlZBTF9UWVBFLk1JTlVURUxZO1xuICAgIHRoaXMudHogPSB0ejtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5zdGFydFRpbWUgPSBzdGFydDtcbiAgICB0aGlzLnN0b3BUaW1lID0gc3RvcDtcbiAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcblxuICAgIHRoaXMudGltZXJJRCA9IG51bGw7XG4gICAgdGhpcy5zdGFydCgpO1xuICB9XG5cbiAgZ2V0IHRpdGxlKCkge1xuICAgIGxldCB7aW50ZXJ2YWwsIGludGVydmFsVHlwZX0gPSB0aGlzO1xuXG4gICAgZm9yIChsZXQga2V5IGluIElOVEVSVkFMX1RZUEUpIHtcbiAgICAgIGxldCB2YWwgPSBJTlRFUlZBTF9UWVBFW2tleV07XG5cbiAgICAgIGlmICh2YWwgPT09IGludGVydmFsVHlwZSlcbiAgICAgICAgcmV0dXJuIGAke2ludGVydmFsfSAke2tleS50b0xvd2VyQ2FzZSgpfWA7XG4gICAgfVxuICB9XG5cbiAgZ2V0IG5vdygpIHtcbiAgICByZXR1cm4gbmV3IFRpbWVCdWNrZXQoKS50eih0aGlzLnR6KTtcbiAgfVxuXG4gIGV4ZWN1dGUoKSB7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuXG4gICAgaWYgKCFzZWxmLnRpbWVySUQpIHJldHVybjtcblxuICAgIHNlbGYuY2FsbGJhY2soKTtcblxuICAgIGxldCBuZXh0VGltZW91dE1pbGxpc2VjID0gc2VsZi5jYWxjdWxhdGVOZXh0VGltZW91dCgpO1xuXG4gICAgLy9zZWxmLnRpbWVySUQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgc2VsZi5leGVjdXRlKCk7XG4gICAgLy99LCBuZXh0VGltZW91dE1pbGxpc2VjKTtcbiAgICB0aGlzLnNldExvbmdUaW1lb3V0KG5leHRUaW1lb3V0TWlsbGlzZWMpO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIGxldCB7dGl0bGUsIG5hbWV9ID0gc2VsZjtcblxuICAgIGxldCBuZXh0VGltZW91dE1pbGxpc2VjID0gc2VsZi5jYWxjdWxhdGVOZXh0VGltZW91dCgpO1xuICAgIGxldCB0aW1lc3BhbiA9IG5ldyBUaW1lU3BhbihuZXh0VGltZW91dE1pbGxpc2VjKTtcblxuICAgIC8vc2VsZi50aW1lcklEID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgLy8gIHNlbGYuZXhlY3V0ZSgpO1xuICAgIC8vfSwgbmV4dFRpbWVvdXRNaWxsaXNlYyk7XG4gICAgdGhpcy5zZXRMb25nVGltZW91dChuZXh0VGltZW91dE1pbGxpc2VjKTtcblxuICAgIGNvbnNvbGUubG9nKGBUaW1lb3VzbHkgc3RhcnRpbmcgJHt0aXRsZX0ke25hbWV9IGluIFQgLSAke3RpbWVzcGFuLnRvU3RyaW5nKCl9IGFuZCBjb3VudGluZ2ApO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBsZXQge3RpdGxlLCBuYW1lLCBub3d9ID0gdGhpcztcblxuICAgIGNvbnNvbGUubG9nKGBbJHt0aXRsZX1dJHtuYW1lfTogQ2FsbGVkIHN0b3AgYXQgJHtub3cudG9TdHJpbmcoKX1gKTtcblxuICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnRpbWVySUQgIT09IG51bGwpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySUQpO1xuICAgICAgdGhpcy50aW1lcklEID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBjYWxjdWxhdGVOZXh0VGltZW91dCgpIHtcbiAgICBsZXQge25hbWUsIHRpdGxlLCBpbnRlcnZhbCwgaW50ZXJ2YWxUeXBlLCBzdGFydGVkLCBub3csIHN0YXJ0VGltZSwgc3RvcFRpbWV9ID0gdGhpcztcblxuICAgIGxldCBsaW1pdCA9IGdldExpbWl0KGludGVydmFsVHlwZSwgbm93KTtcblxuICAgIGxldCBuZXh0RXZlbnQgPSBub3c7XG5cbiAgICAvLyBzZXQgbG93ZXIgaW50ZXJ2YWwgdHlwZXMgdG8gMFxuICAgIGZvciAobGV0IGkgPSA2OyBpID49IDA7IGktLSkge1xuICAgICAgbGV0IGludGVydiA9IGludGVydmFsc1tpXTtcbiAgICAgIGlmIChpbnRlcnYgPT09IGludGVydmFsVHlwZSkgYnJlYWs7XG5cbiAgICAgIHN3aXRjaCAoaW50ZXJ2KSB7XG4gICAgICAgIGNhc2UgJ2RheSc6XG4gICAgICAgICAgbmV4dEV2ZW50W2ludGVydl0gPSAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtb250aCc6XG4gICAgICAgICAgbmV4dEV2ZW50W2ludGVydl0gPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIG5leHRFdmVudFtpbnRlcnZdIC09IG5leHRFdmVudFtpbnRlcnZdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgLy8gbmV4dCBwb3NzaWJsZSBpbnRlcnZhbFxuICAgIG5leHRFdmVudFtpbnRlcnZhbFR5cGVdKys7XG4gICAgLy8gY3VycmVudCBpbnRlcnZhbCB2YWx1ZVxuICAgIGxldCBjdXJyVGltZSA9IG5leHRFdmVudFtpbnRlcnZhbFR5cGVdO1xuXG4gICAgaWYgKHN0YXJ0VGltZSkge1xuICAgICAgaWYgKCFzdGFydGVkKSB7XG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIG5leHRFdmVudFtpbnRlcnZhbFR5cGVdICs9IGN1cnJUaW1lID4gc3RhcnRUaW1lID8gbGltaXQgLSBjdXJyVGltZSArIHN0YXJ0VGltZSA6IHN0YXJ0VGltZSAtIGN1cnJUaW1lO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG5leHRFdmVudFtpbnRlcnZhbFR5cGVdICs9IGludGVydmFsIC0gMTtcblxuICAgICAgICBpZiAoc3RvcFRpbWUpIHtcbiAgICAgICAgICBjdXJyVGltZSA9IG5leHRFdmVudFtpbnRlcnZhbFR5cGVdO1xuXG4gICAgICAgICAgaWYgKCF2YWxpZFRpbWUoY3VyclRpbWUsIHN0YXJ0VGltZSwgc3RvcFRpbWUpKSB7XG4gICAgICAgICAgICBuZXh0RXZlbnRbaW50ZXJ2YWxUeXBlXSArPSBjdXJyVGltZSA+IHN0YXJ0VGltZSA/IGxpbWl0IC0gY3VyclRpbWUgKyBzdGFydFRpbWUgOiBzdGFydFRpbWUgLSBjdXJyVGltZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoIXN0YXJ0ZWQpIHtcbiAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gZ2V0IHRoZSBuZXh0IGludGVydmFsIHR5cGUgZXZlbnRcbiAgICAgICAgd2hpbGUgKGludGVydmFsID4gMSAmJiBuZXh0RXZlbnRbaW50ZXJ2YWxUeXBlXSAlIGludGVydmFsICE9PSAwKSB7XG4gICAgICAgICAgbmV4dEV2ZW50W2ludGVydmFsVHlwZV0rKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG5leHRFdmVudFtpbnRlcnZhbFR5cGVdICs9IGludGVydmFsIC0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBnZXQgdGhlIGRpZmYgaW4gbWlsbGlzZWNvbmRzIGJldHdlZW4gbmV4dEV2ZW50IGFuZCBub3dcbiAgICBsZXQgbWlsbGlzZWNzID0gbmV4dEV2ZW50IC0gdGhpcy5ub3c7XG5cbiAgICBjb25zb2xlLmxvZyhgWyR7dGhpcy5ub3cudG9TdHJpbmcoKX1dICgke3RpdGxlfSkke25hbWV9IC0gTmV4dCBldmVudCBpcyBhdCAke25leHRFdmVudC50b1N0cmluZygpfS4gJHttaWxsaXNlY3N9bXNgKTtcblxuICAgIHJldHVybiBtaWxsaXNlY3M7XG4gIH1cblxuICBzZXRMb25nVGltZW91dCh0aW1lb3V0X21zKSB7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIGxldCB7dGl0bGUsIG5hbWV9ID0gc2VsZjtcbiAgICBsZXQgbWF4ID0gODY0MDAwMDA7IC8vIDEgZGF5IHZzIDIxNDc0ODM2NDcgKG1heCBpbnQpXG4gICAgLy9pZiB3ZSBoYXZlIHRvIHdhaXQgbW9yZSB0aGFuIG1heCB0aW1lLCBuZWVkIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgdGhpcyBmdW5jdGlvbiBhZ2FpblxuICAgIGlmKHRpbWVvdXRfbXMgPiBtYXgpIHtcbiAgICAgIC8vbm93IHdhaXQgdW50aWwgdGhlIG1heCB3YWl0IHRpbWUgcGFzc2VzIHRoZW4gY2FsbCB0aGlzIGZ1bmN0aW9uIGFnYWluIHdpdGhcbiAgICAgIC8vcmVxdWVzdGVkIHdhaXQgLSBtYXggd2FpdCB3ZSBqdXN0IGRpZCwgbWFrZSBzdXJlIGFuZCBwYXNzIGNhbGxiYWNrXG4gICAgICBzZWxmLnRpbWVySUQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHJlbWFpbmluZyA9IHRpbWVvdXRfbXMgLSBtYXg7XG4gICAgICAgIGxldCBkYXlzID0gTWF0aC5mbG9vcihyZW1haW5pbmcgLyA4NjQwMDAwMCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3RpdGxlfSR7bmFtZX06IExvbmcgdGltZXIgLSAke2RheXN9IGRheXMgcmVtYWluaW5nYCk7XG4gICAgICAgIHNlbGYuc2V0TG9uZ1RpbWVvdXQocmVtYWluaW5nKTtcbiAgICAgIH0sIG1heCk7XG4gICAgfVxuICAgIC8vaWYgd2UgYXJlIGFza2luZyB0byB3YWl0IGxlc3MgdGhhbiBtYXgsIGZpbmFsbHkganVzdCBkbyByZWd1bGFyIHNlVGltZW91dCBhbmQgY2FsbCBjYWxsYmFja1xuICAgIGVsc2Uge1xuICAgICAgc2VsZi50aW1lcklEID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZXhlY3V0ZSgpO1xuICAgICAgfSwgdGltZW91dF9tcyk7XG4gICAgfVxuICB9XG5cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXzsiXSwic291cmNlUm9vdCI6IiJ9