/*! timeously v0.3.0 (Mon, 16 Apr 2018 04:59:27)

Timeous interval creation for precise milestone events
@module timeously
@author Ashley Brener <ashley@frisb.com>
@license MIT

The MIT License (MIT)

Copyright (c) 2016 frisB.com <play@frisb.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
    */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("moment-timezone")):"function"==typeof define&&define.amd?define("Timeously",["moment-timezone"],e):"object"==typeof exports?exports.Timeously=e(require("moment-timezone")):t.Timeously=e(t["moment-timezone"])}(window,function(t){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);let i={SECONDLY:"second",MINUTELY:"minute",HOURLY:"hour",DAILY:"day",WEEKLY:"dayOfWeek",MONTHLY:"month",YEARLY:"year"};function n(t,e){if("string"!=typeof t&&(t=""+t),e||(e=2),t.length===e)return t;let s=`000000000${t}`;return s.substr(s.length-e)}let r=s(1),o=-(new Date).getTimezoneOffset();class a{constructor(t){t?"string"==typeof t&&(t=new Date(t)):t=new Date,this.date=t,this._tzOffsetMinutes=-t.getTimezoneOffset()}static get MonthNames(){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}static get DayNames(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}get offsetString(){let t=this.tzOffsetMinutes;if(0===t)return"Z";return`${t>=0?"+":"-"}${n(Math.floor(Math.abs(t/60)))}:${n(Math.abs(t%60))}`}tz(t){return t||(t="GMT"),this.tzOffsetMinutes=r.tz(t).utcOffset(),this.minute+=this.tzOffsetMinutes-o,this}subtract(t){return this-t}toString(t){return t?t.replace("yyyy",this.year.toString()).replace("yy",this.year.toString().substr(2)).replace("MM",n(this.month+1)).replace("dd",n(this.day)).replace("HH",n(this.hour)).replace("mm",n(this.minute)).replace("ss",n(this.second)).replace("SSS",n(this.millisecond,3)).replace("Z",this.offsetString):this.toISOString(!0)}valueOf(){return this.date.getTime()}toUTCDate(){let t=new Date(this.date);return t.setMinutes(t.getMinutes()-this.tzOffsetMinutes+o),t}toISOString(t){return t?this.year+"-"+n(this.month+1)+"-"+n(this.day)+"T"+n(this.hour)+":"+n(this.minute)+":"+n(this.second)+"."+n(this.millisecond,3)+this.offsetString:this.toUTCDate().toISOString()}get millisecond(){return this.date.getMilliseconds()}set millisecond(t){this.date.setMilliseconds(t)}get second(){return this.date.getSeconds()}set second(t){this.date.setSeconds(t)}get minute(){return this.date.getMinutes()}set minute(t){this.date.setMinutes(t)}get hour(){return this.date.getHours()}set hour(t){this.date.setHours(t)}get day(){return this.date.getDate()}set day(t){this.date.setDate(t)}get dayOfWeek(){return this.date.getDay()}set dayOfWeek(t){this.date.setDay(t)}get dayName(){return a.DayNames[this.dayOfWeek]}get month(){return this.date.getMonth()}set month(t){this.date.setMonth(t)}get monthName(){return a.MonthNames[this.month]}get year(){return this.date.getFullYear()}set year(t){this.date.setFullYear(t)}get tzOffsetMinutes(){return this._tzOffsetMinutes}set tzOffsetMinutes(t){this._tzOffsetMinutes=t}get daysInMonth(){return new Date(this.year,this.month+1,0).getDate()}}class u{constructor(t){this.millisec=t||0;let e=t/1e3;this.days=~~(e/86400),this.hours=~~((e-86400*this.days)/3600),this.mins=~~((e-86400*this.days-3600*this.hours)/60),this.sec=~~(e-86400*this.days-3600*this.hours-60*this.mins)}get totalDays(){return this.days}get totalHours(){return~~(this.totalSec/3600)}get totalMins(){return~~(this.totalSec/60)}get totalSec(){return Math.ceil(this.millisec/1e3)}toString(){let t="";return this.days>0&&(t+=`${n(this.days)}:`),t+=`${n(this.hours)}:${n(this.mins)}:${n(this.sec)}`}}let h=["year","month","day","hour","minute","second","millisecond"],l={millisecond:1e3,second:60,minute:60,hour:24,month:12};class c{constructor(t,e){let{name:s,interval:n,type:r,tz:o,start:a,stop:u}=t;this.name=s?` ${s}`:"",this.interval=n||1,this.intervalType=r||i.MINUTELY,this.tz=o,this.callback=e,this.startTime=a,this.stopTime=u,this.started=!1,this.timerID=null,this.start()}get title(){let{interval:t,intervalType:e}=this;for(let s in i){if(i[s]===e)return`${t} ${s.toLowerCase()}`}}get now(){return(new a).tz(this.tz)}execute(){if(!this.timerID)return;this.callback();let t=this.calculateNextTimeout();this.setLongTimeout(t)}start(){let{title:t,name:e}=this,s=this.calculateNextTimeout(),i=new u(s);this.setLongTimeout(s),console.log(`Timeously starting ${t}${e} in T - ${i.toString()} and counting`)}stop(){let{title:t,name:e,now:s}=this;console.log(`[${t}]${e}: Called stop at ${s.toString()}`),this.started=!1,null!==this.timerID&&(clearTimeout(this.timerID),this.timerID=null)}calculateNextTimeout(){let{name:t,title:e,interval:s,intervalType:i,started:n,now:r,startTime:o,stopTime:a}=this,u=function(t,e){if("day"===t)return e.daysInMonth;{let e=l[t];if(!e)throw new Error(`Can not currently handle ${t} intervals`);return e}}(i,r),c=r;for(let t=6;t>=0;t--){let e=h[t];if(e===i)break;switch(e){case"day":c[e]=1;break;case"month":c[e]=0;break;default:c[e]-=c[e]}}c[i]++;let m=c[i];if(o)n?(c[i]+=s-1,a&&(function(t,e,s){return!e||!s||(e<s?t>=e&&t<=s:t>=e||t<=s)}(m=c[i],o,a)||(c[i]+=m>o?u-m+o:o-m))):(this.started=!0,c[i]+=m>o?u-m+o:o-m);else if(n)c[i]+=s-1;else for(this.started=!0;s>1&&c[i]%s!=0;)c[i]++;let d=c-this.now;return console.log(`[${this.now.toString()}] (${e})${t} - Next event is at ${c.toString()}. ${d}ms`),d}setLongTimeout(t){let e=this,{title:s,name:i}=e;e.timerID=t>864e5?setTimeout(function(){let n=t-864e5,r=Math.floor(n/864e5);console.log(`${s}${i}: Long timer - ${r} days remaining`),e.setLongTimeout(n)},864e5):setTimeout(function(){e.execute()},t)}}s.d(e,"INTERVAL_TYPE",function(){return i}),s.d(e,"TimeBucket",function(){return a}),s.d(e,"TimeSpan",function(){return u}),s.d(e,"Timeously",function(){return c})},function(e,s){e.exports=t}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9UaW1lb3VzbHkvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL1RpbWVvdXNseS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9UaW1lb3VzbHkvLi9zcmMvaW50ZXJ2YWx0eXBlLmpzIiwid2VicGFjazovL1RpbWVvdXNseS8uL3NyYy9wYWQuanMiLCJ3ZWJwYWNrOi8vVGltZW91c2x5Ly4vc3JjL3RpbWVidWNrZXQuanMiLCJ3ZWJwYWNrOi8vVGltZW91c2x5Ly4vc3JjL3RpbWVzcGFuLmpzIiwid2VicGFjazovL1RpbWVvdXNseS8uL3NyYy90aW1lb3VzbHkuanMiLCJ3ZWJwYWNrOi8vVGltZW91c2x5L2V4dGVybmFsIFwibW9tZW50LXRpbWV6b25lXCIiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIklOVEVSVkFMX1RZUEUiLCJTRUNPTkRMWSIsIk1JTlVURUxZIiwiSE9VUkxZIiwiREFJTFkiLCJXRUVLTFkiLCJNT05USExZIiwiWUVBUkxZIiwicGFkIiwibnVtIiwic2l6ZSIsImxlbmd0aCIsInN1YnN0ciIsIm1vbWVudCIsImxvY2FsT2Zmc2V0TWludXRlcyIsIkRhdGUiLCJnZXRUaW1lem9uZU9mZnNldCIsInRpbWVidWNrZXRfVGltZUJ1Y2tldCIsIltvYmplY3QgT2JqZWN0XSIsImRhdGUiLCJ0aGlzIiwiX3R6T2Zmc2V0TWludXRlcyIsIk1vbnRoTmFtZXMiLCJEYXlOYW1lcyIsIm9mZnNldFN0cmluZyIsInR6byIsInR6T2Zmc2V0TWludXRlcyIsIk1hdGgiLCJmbG9vciIsImFicyIsInRpbWV6b25lIiwidHoiLCJ1dGNPZmZzZXQiLCJtaW51dGUiLCJ0aW1lQnVja2V0IiwiZm9ybWF0IiwicmVwbGFjZSIsInllYXIiLCJ0b1N0cmluZyIsIm1vbnRoIiwiZGF5IiwiaG91ciIsInNlY29uZCIsIm1pbGxpc2Vjb25kIiwidG9JU09TdHJpbmciLCJnZXRUaW1lIiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJ3aXRoVGltZVpvbmVPZmZzZXQiLCJ0b1VUQ0RhdGUiLCJnZXRNaWxsaXNlY29uZHMiLCJ2YWwiLCJzZXRNaWxsaXNlY29uZHMiLCJnZXRTZWNvbmRzIiwic2V0U2Vjb25kcyIsImdldEhvdXJzIiwic2V0SG91cnMiLCJnZXREYXRlIiwic2V0RGF0ZSIsImRheU9mV2VlayIsImdldERheSIsInNldERheSIsImRheU5hbWUiLCJnZXRNb250aCIsInNldE1vbnRoIiwibW9udGhOYW1lIiwiZ2V0RnVsbFllYXIiLCJzZXRGdWxsWWVhciIsImRheXNJbk1vbnRoIiwidGltZXNwYW5fVGltZVNwYW4iLCJtaWxsaXNlYyIsInNlYyIsImRheXMiLCJob3VycyIsIm1pbnMiLCJ0b3RhbERheXMiLCJ0b3RhbEhvdXJzIiwidG90YWxTZWMiLCJ0b3RhbE1pbnMiLCJjZWlsIiwiY2xvY2siLCJpbnRlcnZhbHMiLCJpbnRlcnZhbExpbWl0IiwidGltZW91c2x5X1RpbWVvdXNseSIsIm9wdGlvbnMiLCJjYWxsYmFjayIsImludGVydmFsIiwidHlwZSIsInN0YXJ0Iiwic3RvcCIsImludGVydmFsVHlwZSIsInN0YXJ0VGltZSIsInN0b3BUaW1lIiwic3RhcnRlZCIsInRpbWVySUQiLCJ0aXRsZSIsImtleSIsInRvTG93ZXJDYXNlIiwibm93IiwibmV4dFRpbWVvdXRNaWxsaXNlYyIsImNhbGN1bGF0ZU5leHRUaW1lb3V0Iiwic2V0TG9uZ1RpbWVvdXQiLCJ0aW1lc3BhbiIsImNvbnNvbGUiLCJsb2ciLCJjbGVhclRpbWVvdXQiLCJsaW1pdCIsIkVycm9yIiwiZ2V0TGltaXQiLCJuZXh0RXZlbnQiLCJpbnRlcnYiLCJjdXJyVGltZSIsInZhbGlkVGltZSIsIm1pbGxpc2VjcyIsInRpbWVvdXRfbXMiLCJzZWxmIiwic2V0VGltZW91dCIsInJlbWFpbmluZyIsImV4ZWN1dGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsRUFBQUcsUUFBQSxvQkFDQSxtQkFBQUMsZUFBQUMsSUFDQUQsT0FBQSxnQ0FBQUosR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSxVQUFBRCxFQUFBRyxRQUFBLG9CQUVBSixFQUFBLFVBQUFDLEVBQUFELEVBQUEsb0JBUkEsQ0FTQ08sT0FBQSxTQUFBQyxHQUNELG1CQ1RBLElBQUFDLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFULFFBR0EsSUFBQUMsRUFBQU0sRUFBQUUsSUFDQUMsRUFBQUQsRUFDQUUsR0FBQSxFQUNBWCxZQVVBLE9BTkFZLEVBQUFILEdBQUFJLEtBQUFaLEVBQUFELFFBQUFDLElBQUFELFFBQUFRLEdBR0FQLEVBQUFVLEdBQUEsRUFHQVYsRUFBQUQsUUEyQ0EsT0F0Q0FRLEVBQUFNLEVBQUFGLEVBR0FKLEVBQUFPLEVBQUFSLEVBR0FDLEVBQUFRLEVBQUEsU0FBQWhCLEVBQUFpQixFQUFBQyxHQUNBVixFQUFBVyxFQUFBbkIsRUFBQWlCLElBQ0FHLE9BQUFDLGVBQUFyQixFQUFBaUIsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFWLEVB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Q0EsT0FBQUQsSUFBQUMsSUFHQUQsRUFBQUMsRUFDQW1CLEdBQUFwQixHQUFBb0IsR0FBQW5CLEVBRUFtQixHQUFBcEIsR0FBQW9CLEdBQUFuQixHQXVIQW9CLENBRkFELEVBQUFGLEVBQUFuQixHQUVBQyxFQUFBQyxLQUNBaUIsRUFBQW5CLElBQUFxQixFQUFBcEIsRUFBQWUsRUFBQUssRUFBQXBCLElBQUFvQixNQVZBM0YsS0FBQXlFLFNBQUEsRUFDQWdCLEVBQUFuQixJQUFBcUIsRUFBQXBCLEVBQUFlLEVBQUFLLEVBQUFwQixJQUFBb0IsUUFlQSxHQUFBbEIsRUFRQWdCLEVBQUFuQixJQUFBSixFQUFBLE9BTEEsSUFGQWxFLEtBQUF5RSxTQUFBLEVBRUFQLEVBQUEsR0FBQXVCLEVBQUFuQixHQUFBSixHQUFBLEdBQ0F1QixFQUFBbkIsS0FTQSxJQUFBdUIsRUFBQUosRUFBQXpGLEtBQUE4RSxJQUlBLE9BRkFLLFFBQUFDLFFBQW9CcEYsS0FBQThFLElBQUE1RCxnQkFBeUJ5RCxLQUFTakgsd0JBQTJCK0gsRUFBQXZFLGVBQXlCMkUsT0FFMUdBLEVBR0EvRixlQUFBZ0csR0FDQSxJQUFBQyxFQUFBL0YsTUFDQTJFLE1BQVNBLEVBQUFqSCxRQUFZcUksRUFNckJBLEVBQUFyQixRQUhBb0IsRUFGQSxNQUtBRSxXQUFBLFdBQ0EsSUFBQUMsRUFBQUgsRUFOQSxNQU9BMUMsRUFBQTdDLEtBQUFDLE1BQUF5RixFQUFBLE9BQ0FkLFFBQUFDLE9BQXVCVCxJQUFRakgsbUJBQXNCMEYsb0JBQ3JEMkMsRUFBQWQsZUFBQWdCLElBVEEsT0FjQUQsV0FBQSxXQUNBRCxFQUFBRyxXQUNPSix1TEN0TVBwSixFQUFBRCxRQUFBTSIsImZpbGUiOiJ0aW1lb3VzbHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJtb21lbnQtdGltZXpvbmVcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJUaW1lb3VzbHlcIiwgW1wibW9tZW50LXRpbWV6b25lXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlRpbWVvdXNseVwiXSA9IGZhY3RvcnkocmVxdWlyZShcIm1vbWVudC10aW1lem9uZVwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiVGltZW91c2x5XCJdID0gZmFjdG9yeShyb290W1wibW9tZW50LXRpbWV6b25lXCJdKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBsZXQgSU5URVJWQUxfVFlQRSA9IHtcblx0U0VDT05ETFk6ICdzZWNvbmQnLFxuXHRNSU5VVEVMWTogJ21pbnV0ZScsXG5cdEhPVVJMWTogJ2hvdXInLFxuXHREQUlMWTogJ2RheScsXG5cdFdFRUtMWTogJ2RheU9mV2VlaycsXG5cdE1PTlRITFk6ICdtb250aCcsXG5cdFlFQVJMWTogJ3llYXInXG59OyIsImV4cG9ydCBmdW5jdGlvbiBwYWQobnVtLCBzaXplKSB7XG5cdGlmICh0eXBlb2YobnVtKSAhPT0gJ3N0cmluZycpXG5cdFx0bnVtID0gJycgKyBudW07XG5cblx0aWYgKCFzaXplKVxuXHRcdHNpemUgPSAyO1xuXG5cdGlmIChudW0ubGVuZ3RoID09PSBzaXplKVxuXHRcdHJldHVybiBudW07XG5cblx0bGV0IHMgPSBgMDAwMDAwMDAwJHtudW19YDtcblx0cmV0dXJuIHMuc3Vic3RyKHMubGVuZ3RoIC0gc2l6ZSk7XG59IiwiaW1wb3J0IHsgcGFkIH0gZnJvbSAnLi9wYWQnO1xuXG5sZXQgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50LXRpbWV6b25lJyk7XG5cbmxldCBsb2NhbE9mZnNldE1pbnV0ZXMgPSAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpO1xuXG5leHBvcnQgY2xhc3MgVGltZUJ1Y2tldCB7XG5cdGNvbnN0cnVjdG9yKGRhdGUpIHtcblx0XHRpZiAoIWRhdGUpIHtcblx0XHRcdGRhdGUgPSBuZXcgRGF0ZSgpO1xuXHRcdH1cblx0XHRlbHNlIGlmICh0eXBlb2YoZGF0ZSkgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRkYXRlID0gbmV3IERhdGUoZGF0ZSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5kYXRlID0gZGF0ZTtcblx0XHR0aGlzLl90ek9mZnNldE1pbnV0ZXMgPSAtZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuXHR9XG5cblx0c3RhdGljIGdldCBNb250aE5hbWVzKCkge1xuXHRcdHJldHVybiBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cdH1cblxuXHRzdGF0aWMgZ2V0IERheU5hbWVzKCkge1xuXHRcdHJldHVybiBbJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCddO1xuXHR9XG5cblx0Z2V0IG9mZnNldFN0cmluZygpIHtcblx0XHRsZXQgdHpvID0gdGhpcy50ek9mZnNldE1pbnV0ZXM7XG5cblx0XHRpZiAodHpvID09PSAwKSB7XG5cdFx0XHRyZXR1cm4gJ1onO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGxldCBkaWZmID0gdHpvID49IDAgPyAnKycgOiAnLSc7XG5cdFx0XHRyZXR1cm4gYCR7ZGlmZn0ke3BhZChNYXRoLmZsb29yKE1hdGguYWJzKHR6byAvIDYwKSkpfToke3BhZChNYXRoLmFicyh0em8gJSA2MCkpfWA7XG5cdFx0fVxuXHR9XG5cblx0dHoodGltZXpvbmUpIHtcblx0XHRpZiAoIXRpbWV6b25lKVxuXHRcdFx0dGltZXpvbmUgPSAnR01UJztcblxuXHRcdHRoaXMudHpPZmZzZXRNaW51dGVzID0gbW9tZW50LnR6KHRpbWV6b25lKS51dGNPZmZzZXQoKTtcblx0XHR0aGlzLm1pbnV0ZSArPSB0aGlzLnR6T2Zmc2V0TWludXRlcyAtIGxvY2FsT2Zmc2V0TWludXRlcztcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiByZXR1cm5zIHRoZSBkaWZmZXJlbnQgaW4gbWlsbGlzZWNvbmRzIGJldHdlZW4gdGhpcyBhbmQgdGltZUJ1Y2tldCBkYXRlXG5cdCAqIEBwYXJhbSB0aW1lQnVja2V0XG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuXHRzdWJ0cmFjdCh0aW1lQnVja2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMgLSB0aW1lQnVja2V0O1xuXHR9XG5cblx0dG9TdHJpbmcoZm9ybWF0KSB7XG5cdFx0aWYgKGZvcm1hdCkge1xuXHRcdFx0cmV0dXJuIGZvcm1hdFxuXHRcdFx0XHQucmVwbGFjZSgneXl5eScsIHRoaXMueWVhci50b1N0cmluZygpKVxuXHRcdFx0XHQucmVwbGFjZSgneXknLCB0aGlzLnllYXIudG9TdHJpbmcoKS5zdWJzdHIoMikpXG5cdFx0XHRcdC5yZXBsYWNlKCdNTScsIHBhZCh0aGlzLm1vbnRoICsgMSkpXG5cdFx0XHRcdC5yZXBsYWNlKCdkZCcsIHBhZCh0aGlzLmRheSkpXG5cdFx0XHRcdC5yZXBsYWNlKCdISCcsIHBhZCh0aGlzLmhvdXIpKVxuXHRcdFx0XHQucmVwbGFjZSgnbW0nLCBwYWQodGhpcy5taW51dGUpKVxuXHRcdFx0XHQucmVwbGFjZSgnc3MnLCBwYWQodGhpcy5zZWNvbmQpKVxuXHRcdFx0XHQucmVwbGFjZSgnU1NTJywgcGFkKHRoaXMubWlsbGlzZWNvbmQsIDMpKVxuXHRcdFx0XHQucmVwbGFjZSgnWicsIHRoaXMub2Zmc2V0U3RyaW5nKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gdGhpcy50b0lTT1N0cmluZyh0cnVlKTtcblx0XHR9XG5cdH1cblxuXHR2YWx1ZU9mKCkge1xuXHRcdHJldHVybiB0aGlzLmRhdGUuZ2V0VGltZSgpO1xuXHR9XG5cblx0dG9VVENEYXRlKCkge1xuXHRcdGxldCBkID0gbmV3IERhdGUodGhpcy5kYXRlKTtcblx0XHRkLnNldE1pbnV0ZXMoZC5nZXRNaW51dGVzKCkgLSB0aGlzLnR6T2Zmc2V0TWludXRlcyArIGxvY2FsT2Zmc2V0TWludXRlcyk7XG5cdFx0cmV0dXJuIGQ7XG5cdH1cblxuXHR0b0lTT1N0cmluZyh3aXRoVGltZVpvbmVPZmZzZXQpIHtcblx0XHRpZiAod2l0aFRpbWVab25lT2Zmc2V0KSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLnllYXJcblx0XHRcdFx0XHQrICctJyArIHBhZCh0aGlzLm1vbnRoICsgMSlcblx0XHRcdFx0XHQrICctJyArIHBhZCh0aGlzLmRheSlcblx0XHRcdFx0XHQrICdUJyArIHBhZCh0aGlzLmhvdXIpXG5cdFx0XHRcdFx0KyAnOicgKyBwYWQodGhpcy5taW51dGUpXG5cdFx0XHRcdFx0KyAnOicgKyBwYWQodGhpcy5zZWNvbmQpXG5cdFx0XHRcdFx0KyAnLicgKyBwYWQodGhpcy5taWxsaXNlY29uZCwgMylcblx0XHRcdFx0XHQrIHRoaXMub2Zmc2V0U3RyaW5nO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiB0aGlzLnRvVVRDRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cdFx0fVxuXHR9XG5cblx0Z2V0IG1pbGxpc2Vjb25kKCkgeyByZXR1cm4gdGhpcy5kYXRlLmdldE1pbGxpc2Vjb25kcygpOyB9XG5cdHNldCBtaWxsaXNlY29uZCh2YWwpIHsgdGhpcy5kYXRlLnNldE1pbGxpc2Vjb25kcyh2YWwpOyB9XG5cblx0Z2V0IHNlY29uZCgpIHsgcmV0dXJuIHRoaXMuZGF0ZS5nZXRTZWNvbmRzKCk7IH1cblx0c2V0IHNlY29uZCh2YWwpIHsgdGhpcy5kYXRlLnNldFNlY29uZHModmFsKTsgfVxuXG5cdGdldCBtaW51dGUoKSB7IHJldHVybiB0aGlzLmRhdGUuZ2V0TWludXRlcygpOyB9XG5cdHNldCBtaW51dGUodmFsKSB7IHRoaXMuZGF0ZS5zZXRNaW51dGVzKHZhbCk7IH1cblxuXHRnZXQgaG91cigpIHsgcmV0dXJuIHRoaXMuZGF0ZS5nZXRIb3VycygpOyB9XG5cdHNldCBob3VyKHZhbCkgeyB0aGlzLmRhdGUuc2V0SG91cnModmFsKTsgfVxuXG5cdGdldCBkYXkoKSB7IHJldHVybiB0aGlzLmRhdGUuZ2V0RGF0ZSgpOyB9XG5cdHNldCBkYXkodmFsKSB7IHRoaXMuZGF0ZS5zZXREYXRlKHZhbCk7IH1cblxuXHRnZXQgZGF5T2ZXZWVrKCkgeyByZXR1cm4gdGhpcy5kYXRlLmdldERheSgpOyB9XG5cdHNldCBkYXlPZldlZWsodmFsKSB7IHRoaXMuZGF0ZS5zZXREYXkodmFsKTsgfVxuXG5cdGdldCBkYXlOYW1lKCkge1xuXHRcdHJldHVybiBUaW1lQnVja2V0LkRheU5hbWVzW3RoaXMuZGF5T2ZXZWVrXTtcblx0fVxuXG5cdGdldCBtb250aCgpIHsgcmV0dXJuIHRoaXMuZGF0ZS5nZXRNb250aCgpOyB9XG5cdHNldCBtb250aCh2YWwpIHsgdGhpcy5kYXRlLnNldE1vbnRoKHZhbCk7IH1cblxuXHRnZXQgbW9udGhOYW1lKCkgeyByZXR1cm4gVGltZUJ1Y2tldC5Nb250aE5hbWVzW3RoaXMubW9udGhdOyB9XG5cblx0Z2V0IHllYXIoKSB7IHJldHVybiB0aGlzLmRhdGUuZ2V0RnVsbFllYXIoKTsgfVxuXHRzZXQgeWVhcih2YWwpIHsgdGhpcy5kYXRlLnNldEZ1bGxZZWFyKHZhbCk7IH1cblxuXHRnZXQgdHpPZmZzZXRNaW51dGVzKCkgeyByZXR1cm4gdGhpcy5fdHpPZmZzZXRNaW51dGVzOyB9XG5cdHNldCB0ek9mZnNldE1pbnV0ZXModmFsKSB7IHRoaXMuX3R6T2Zmc2V0TWludXRlcyA9IHZhbDsgfVxuXG5cdGdldCBkYXlzSW5Nb250aCgpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUodGhpcy55ZWFyLCB0aGlzLm1vbnRoICsgMSwgMCkuZ2V0RGF0ZSgpO1xuXHR9XG59IiwiaW1wb3J0IHsgcGFkIH0gZnJvbSAnLi9wYWQnO1xuXG5leHBvcnQgY2xhc3MgVGltZVNwYW4ge1xuXG4gIGNvbnN0cnVjdG9yKG1pbGxpc2VjKSB7XG5cbiAgICB0aGlzLm1pbGxpc2VjID0gbWlsbGlzZWMgfHwgMDtcblxuICAgIGxldCBzZWMgPSBtaWxsaXNlYyAvIDEwMDA7XG5cbiAgICB0aGlzLmRheXMgPSB+fihzZWMgLyA4NjQwMCk7XG4gICAgLy8gQWZ0ZXIgZGVkdWN0aW5nIHRoZSBkYXlzIGNhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGhvdXJzIGxlZnRcbiAgICB0aGlzLmhvdXJzID0gfn4oKHNlYyAtICh0aGlzLmRheXMgKiA4NjQwMCkpIC8gMzYwMCk7XG4gICAgLy8gQWZ0ZXIgZGF5cyBhbmQgaG91cnMgLCBob3cgbWFueSBtaW51dGVzIGFyZSBsZWZ0XG4gICAgdGhpcy5taW5zID0gfn4oKHNlYyAtICh0aGlzLmRheXMgKiA4NjQwMCkgLSAodGhpcy5ob3VycyAqIDM2MDApKSAvIDYwKTtcbiAgICAvLyBGaW5hbGx5IGhvdyBtYW55IHNlY29uZHMgbGVmdCBhZnRlciByZW1vdmluZyBkYXlzLCBob3VycyBhbmQgbWludXRlcy5cbiAgICB0aGlzLnNlYyA9IH5+KChzZWMgLSAodGhpcy5kYXlzICogODY0MDApIC0gKHRoaXMuaG91cnMgKiAzNjAwKSAtICh0aGlzLm1pbnMgKiA2MCkpKTsvLyArIDE7IHJlbW92aW5nIHRvIHRlc3QgZXhwb3J0cyBkZWx0YWdydW50XG4gIH1cblxuICBnZXQgdG90YWxEYXlzKCkge1xuICAgIHJldHVybiB0aGlzLmRheXM7XG4gIH1cblxuICBnZXQgdG90YWxIb3VycygpIHtcbiAgICByZXR1cm4gfn4odGhpcy50b3RhbFNlYyAvIDM2MDApO1xuICB9XG5cbiAgZ2V0IHRvdGFsTWlucygpIHtcbiAgICByZXR1cm4gfn4odGhpcy50b3RhbFNlYyAvIDYwKTtcbiAgfVxuXG4gIGdldCB0b3RhbFNlYygpIHtcbiAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMubWlsbGlzZWMgLyAxMDAwKTtcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCBjbG9jayA9ICcnO1xuXG4gICAgaWYgKHRoaXMuZGF5cyA+IDApXG4gICAgICBjbG9jayArPSBgJHtwYWQodGhpcy5kYXlzKX06YDtcblxuICAgIGNsb2NrICs9IGAke3BhZCh0aGlzLmhvdXJzKX06JHtwYWQodGhpcy5taW5zKX06JHtwYWQodGhpcy5zZWMpfWA7XG5cbiAgICByZXR1cm4gY2xvY2s7XG4gIH1cbn1cbiIsImltcG9ydCB7IElOVEVSVkFMX1RZUEUgfSBmcm9tICcuL2ludGVydmFsdHlwZSc7XG5pbXBvcnQgeyBUaW1lQnVja2V0IH0gZnJvbSAnLi90aW1lYnVja2V0JztcbmltcG9ydCB7IFRpbWVTcGFuIH0gZnJvbSAnLi90aW1lc3Bhbic7XG5cbmxldCBpbnRlcnZhbHMgPSBbJ3llYXInLCAnbW9udGgnLCAnZGF5JywgJ2hvdXInLCAnbWludXRlJywgJ3NlY29uZCcsICdtaWxsaXNlY29uZCddO1xubGV0IGludGVydmFsTGltaXQgPSB7XG4gIG1pbGxpc2Vjb25kOiAxMDAwLFxuICBzZWNvbmQ6IDYwLFxuICBtaW51dGU6IDYwLFxuICBob3VyOiAyNCxcbiAgbW9udGg6IDEyXG59O1xuXG5mdW5jdGlvbiBnZXRMaW1pdChpbnRlcnZhbFR5cGUsIGRhdGUpIHtcbiAgaWYgKGludGVydmFsVHlwZSA9PT0gJ2RheScpIHtcbiAgICByZXR1cm4gZGF0ZS5kYXlzSW5Nb250aDtcbiAgfVxuICBlbHNlIHtcbiAgICBsZXQgbGltaXQgPSBpbnRlcnZhbExpbWl0W2ludGVydmFsVHlwZV07XG4gICAgaWYgKCFsaW1pdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IGN1cnJlbnRseSBoYW5kbGUgJHtpbnRlcnZhbFR5cGV9IGludGVydmFsc2ApO1xuICAgIH1cbiAgICByZXR1cm4gbGltaXQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRUaW1lKGN1cnJUaW1lLCBzdGFydFRpbWUsIHN0b3BUaW1lKSB7XG4gIGlmICghc3RhcnRUaW1lIHx8ICFzdG9wVGltZSlcbiAgICByZXR1cm4gdHJ1ZTtcblxuICBpZiAoc3RhcnRUaW1lIDwgc3RvcFRpbWUpXG4gICAgcmV0dXJuIGN1cnJUaW1lID49IHN0YXJ0VGltZSAmJiBjdXJyVGltZSA8PSBzdG9wVGltZTtcblxuICByZXR1cm4gY3VyclRpbWUgPj0gc3RhcnRUaW1lIHx8IGN1cnJUaW1lIDw9IHN0b3BUaW1lO1xufVxuXG5leHBvcnQgY2xhc3MgVGltZW91c2x5IHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBsZXQge25hbWUsIGludGVydmFsLCB0eXBlLCB0eiwgc3RhcnQsIHN0b3B9ID0gb3B0aW9ucztcblxuICAgIHRoaXMubmFtZSA9IChuYW1lID8gYCAke25hbWV9YCA6ICcnKTtcbiAgICB0aGlzLmludGVydmFsID0gaW50ZXJ2YWwgfHwgMTtcbiAgICB0aGlzLmludGVydmFsVHlwZSA9IHR5cGUgfHwgSU5URVJWQUxfVFlQRS5NSU5VVEVMWTtcbiAgICB0aGlzLnR6ID0gdHo7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMuc3RhcnRUaW1lID0gc3RhcnQ7XG4gICAgdGhpcy5zdG9wVGltZSA9IHN0b3A7XG4gICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG5cbiAgICB0aGlzLnRpbWVySUQgPSBudWxsO1xuICAgIHRoaXMuc3RhcnQoKTtcbiAgfVxuXG4gIGdldCB0aXRsZSgpIHtcbiAgICBsZXQge2ludGVydmFsLCBpbnRlcnZhbFR5cGV9ID0gdGhpcztcblxuICAgIGZvciAobGV0IGtleSBpbiBJTlRFUlZBTF9UWVBFKSB7XG4gICAgICBsZXQgdmFsID0gSU5URVJWQUxfVFlQRVtrZXldO1xuXG4gICAgICBpZiAodmFsID09PSBpbnRlcnZhbFR5cGUpXG4gICAgICAgIHJldHVybiBgJHtpbnRlcnZhbH0gJHtrZXkudG9Mb3dlckNhc2UoKX1gO1xuICAgIH1cbiAgfVxuXG4gIGdldCBub3coKSB7XG4gICAgcmV0dXJuIG5ldyBUaW1lQnVja2V0KCkudHoodGhpcy50eik7XG4gIH1cblxuICBleGVjdXRlKCkge1xuICAgIGxldCBzZWxmID0gdGhpcztcblxuICAgIGlmICghc2VsZi50aW1lcklEKSByZXR1cm47XG5cbiAgICBzZWxmLmNhbGxiYWNrKCk7XG5cbiAgICBsZXQgbmV4dFRpbWVvdXRNaWxsaXNlYyA9IHNlbGYuY2FsY3VsYXRlTmV4dFRpbWVvdXQoKTtcblxuICAgIC8vc2VsZi50aW1lcklEID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgLy8gIHNlbGYuZXhlY3V0ZSgpO1xuICAgIC8vfSwgbmV4dFRpbWVvdXRNaWxsaXNlYyk7XG4gICAgdGhpcy5zZXRMb25nVGltZW91dChuZXh0VGltZW91dE1pbGxpc2VjKTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBsZXQge3RpdGxlLCBuYW1lfSA9IHNlbGY7XG5cbiAgICBsZXQgbmV4dFRpbWVvdXRNaWxsaXNlYyA9IHNlbGYuY2FsY3VsYXRlTmV4dFRpbWVvdXQoKTtcbiAgICBsZXQgdGltZXNwYW4gPSBuZXcgVGltZVNwYW4obmV4dFRpbWVvdXRNaWxsaXNlYyk7XG5cbiAgICAvL3NlbGYudGltZXJJRCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIC8vICBzZWxmLmV4ZWN1dGUoKTtcbiAgICAvL30sIG5leHRUaW1lb3V0TWlsbGlzZWMpO1xuICAgIHRoaXMuc2V0TG9uZ1RpbWVvdXQobmV4dFRpbWVvdXRNaWxsaXNlYyk7XG5cbiAgICBjb25zb2xlLmxvZyhgVGltZW91c2x5IHN0YXJ0aW5nICR7dGl0bGV9JHtuYW1lfSBpbiBUIC0gJHt0aW1lc3Bhbi50b1N0cmluZygpfSBhbmQgY291bnRpbmdgKTtcbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgbGV0IHt0aXRsZSwgbmFtZSwgbm93fSA9IHRoaXM7XG5cbiAgICBjb25zb2xlLmxvZyhgWyR7dGl0bGV9XSR7bmFtZX06IENhbGxlZCBzdG9wIGF0ICR7bm93LnRvU3RyaW5nKCl9YCk7XG5cbiAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICBpZiAodGhpcy50aW1lcklEICE9PSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklEKTtcbiAgICAgIHRoaXMudGltZXJJRCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgY2FsY3VsYXRlTmV4dFRpbWVvdXQoKSB7XG4gICAgbGV0IHtuYW1lLCB0aXRsZSwgaW50ZXJ2YWwsIGludGVydmFsVHlwZSwgc3RhcnRlZCwgbm93LCBzdGFydFRpbWUsIHN0b3BUaW1lfSA9IHRoaXM7XG5cbiAgICBsZXQgbGltaXQgPSBnZXRMaW1pdChpbnRlcnZhbFR5cGUsIG5vdyk7XG5cbiAgICBsZXQgbmV4dEV2ZW50ID0gbm93O1xuXG4gICAgLy8gc2V0IGxvd2VyIGludGVydmFsIHR5cGVzIHRvIDBcbiAgICBmb3IgKGxldCBpID0gNjsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGxldCBpbnRlcnYgPSBpbnRlcnZhbHNbaV07XG4gICAgICBpZiAoaW50ZXJ2ID09PSBpbnRlcnZhbFR5cGUpIGJyZWFrO1xuXG4gICAgICBzd2l0Y2ggKGludGVydikge1xuICAgICAgICBjYXNlICdkYXknOlxuICAgICAgICAgIG5leHRFdmVudFtpbnRlcnZdID0gMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgIG5leHRFdmVudFtpbnRlcnZdID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBuZXh0RXZlbnRbaW50ZXJ2XSAtPSBuZXh0RXZlbnRbaW50ZXJ2XTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIH1cblxuICAgIC8vIG5leHQgcG9zc2libGUgaW50ZXJ2YWxcbiAgICBuZXh0RXZlbnRbaW50ZXJ2YWxUeXBlXSsrO1xuICAgIC8vIGN1cnJlbnQgaW50ZXJ2YWwgdmFsdWVcbiAgICBsZXQgY3VyclRpbWUgPSBuZXh0RXZlbnRbaW50ZXJ2YWxUeXBlXTtcblxuICAgIGlmIChzdGFydFRpbWUpIHtcbiAgICAgIGlmICghc3RhcnRlZCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICBuZXh0RXZlbnRbaW50ZXJ2YWxUeXBlXSArPSBjdXJyVGltZSA+IHN0YXJ0VGltZSA/IGxpbWl0IC0gY3VyclRpbWUgKyBzdGFydFRpbWUgOiBzdGFydFRpbWUgLSBjdXJyVGltZTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBuZXh0RXZlbnRbaW50ZXJ2YWxUeXBlXSArPSBpbnRlcnZhbCAtIDE7XG5cbiAgICAgICAgaWYgKHN0b3BUaW1lKSB7XG4gICAgICAgICAgY3VyclRpbWUgPSBuZXh0RXZlbnRbaW50ZXJ2YWxUeXBlXTtcblxuICAgICAgICAgIGlmICghdmFsaWRUaW1lKGN1cnJUaW1lLCBzdGFydFRpbWUsIHN0b3BUaW1lKSkge1xuICAgICAgICAgICAgbmV4dEV2ZW50W2ludGVydmFsVHlwZV0gKz0gY3VyclRpbWUgPiBzdGFydFRpbWUgPyBsaW1pdCAtIGN1cnJUaW1lICsgc3RhcnRUaW1lIDogc3RhcnRUaW1lIC0gY3VyclRpbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKCFzdGFydGVkKSB7XG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIC8vIGdldCB0aGUgbmV4dCBpbnRlcnZhbCB0eXBlIGV2ZW50XG4gICAgICAgIHdoaWxlIChpbnRlcnZhbCA+IDEgJiYgbmV4dEV2ZW50W2ludGVydmFsVHlwZV0gJSBpbnRlcnZhbCAhPT0gMCkge1xuICAgICAgICAgIG5leHRFdmVudFtpbnRlcnZhbFR5cGVdKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBuZXh0RXZlbnRbaW50ZXJ2YWxUeXBlXSArPSBpbnRlcnZhbCAtIDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZ2V0IHRoZSBkaWZmIGluIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIG5leHRFdmVudCBhbmQgbm93XG4gICAgbGV0IG1pbGxpc2VjcyA9IG5leHRFdmVudCAtIHRoaXMubm93O1xuXG4gICAgY29uc29sZS5sb2coYFske3RoaXMubm93LnRvU3RyaW5nKCl9XSAoJHt0aXRsZX0pJHtuYW1lfSAtIE5leHQgZXZlbnQgaXMgYXQgJHtuZXh0RXZlbnQudG9TdHJpbmcoKX0uICR7bWlsbGlzZWNzfW1zYCk7XG5cbiAgICByZXR1cm4gbWlsbGlzZWNzO1xuICB9XG5cbiAgc2V0TG9uZ1RpbWVvdXQodGltZW91dF9tcykge1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBsZXQge3RpdGxlLCBuYW1lfSA9IHNlbGY7XG4gICAgbGV0IG1heCA9IDg2NDAwMDAwOyAvLyAxIGRheSB2cyAyMTQ3NDgzNjQ3IChtYXggaW50KVxuICAgIC8vaWYgd2UgaGF2ZSB0byB3YWl0IG1vcmUgdGhhbiBtYXggdGltZSwgbmVlZCB0byByZWN1cnNpdmVseSBjYWxsIHRoaXMgZnVuY3Rpb24gYWdhaW5cbiAgICBpZih0aW1lb3V0X21zID4gbWF4KSB7XG4gICAgICAvL25vdyB3YWl0IHVudGlsIHRoZSBtYXggd2FpdCB0aW1lIHBhc3NlcyB0aGVuIGNhbGwgdGhpcyBmdW5jdGlvbiBhZ2FpbiB3aXRoXG4gICAgICAvL3JlcXVlc3RlZCB3YWl0IC0gbWF4IHdhaXQgd2UganVzdCBkaWQsIG1ha2Ugc3VyZSBhbmQgcGFzcyBjYWxsYmFja1xuICAgICAgc2VsZi50aW1lcklEID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCByZW1haW5pbmcgPSB0aW1lb3V0X21zIC0gbWF4O1xuICAgICAgICBsZXQgZGF5cyA9IE1hdGguZmxvb3IocmVtYWluaW5nIC8gODY0MDAwMDApO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt0aXRsZX0ke25hbWV9OiBMb25nIHRpbWVyIC0gJHtkYXlzfSBkYXlzIHJlbWFpbmluZ2ApO1xuICAgICAgICBzZWxmLnNldExvbmdUaW1lb3V0KHJlbWFpbmluZyk7XG4gICAgICB9LCBtYXgpO1xuICAgIH1cbiAgICAvL2lmIHdlIGFyZSBhc2tpbmcgdG8gd2FpdCBsZXNzIHRoYW4gbWF4LCBmaW5hbGx5IGp1c3QgZG8gcmVndWxhciBzZVRpbWVvdXQgYW5kIGNhbGwgY2FsbGJhY2tcbiAgICBlbHNlIHtcbiAgICAgIHNlbGYudGltZXJJRCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmV4ZWN1dGUoKTtcbiAgICAgIH0sIHRpbWVvdXRfbXMpO1xuICAgIH1cbiAgfVxuXG59IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX187Il0sInNvdXJjZVJvb3QiOiIifQ==